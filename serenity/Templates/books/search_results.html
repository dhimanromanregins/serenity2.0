{% extends "base_generic.html" %}

{% block content %}
  <h1>Search Books</h1>
  
  <form method="get">
    <input type="text" name="q" value="{{ search_query }}" placeholder="Search for books...">
    <select name="genre">
      <option value="">All Genres</option>
      {% for genre in genres %}
        <option value="{{ genre.id }}" {% if selected_genre == genre.id|stringformat:"s" %}selected{% endif %}>{{ genre.name }}</option>
      {% endfor %}
    </select>
    <button type="submit">Search</button>
  </form>
  
  <h2>Results</h2>
  <ul>
    {% for book in books %}
      <li>
        <a href="{% url 'book_detail' book.id %}">{{ book.title }}</a> by {{ book.author }}
      </li>
    {% empty %}
      <li>No books found.</li>
    {% endfor %}
  </ul>
{% endblock %}
